<!doctype html><html lang=en>
<head>
<meta name=generator content="Hugo 0.92.1">
<title>
Esoye —
My note blog
</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="My note blog">
<meta name=keywords content="数据库">
<meta name=robots content="noodp">
<link rel=canonical href=https://Esoye.github.io/>
<link rel=stylesheet href=https://Esoye.github.io/assets/style.css>
<link rel=stylesheet href=https://Esoye.github.io/style.css>
<link rel=apple-touch-icon-precomposed sizes=144x144 href=https://Esoye.github.io/img/apple-touch-icon-144-precomposed.png>
<link rel="shortcut icon" href=https://Esoye.github.io/img/favicon.png>
<link href=https://Esoye.github.io/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://Esoye.github.io/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://Esoye.github.io/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://Esoye.github.io/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://Esoye.github.io/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://Esoye.github.io/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Esoye">
<meta name=twitter:description content>
<meta property="og:title" content="Esoye">
<meta property="og:description" content>
<meta property="og:type" content="website">
<meta property="og:url" content="https://Esoye.github.io/"><meta property="og:site_name" content="Esoye">
<link rel=alternate type=application/rss+xml href=/index.xml title=Esoye>
</head>
<body class=dark-theme>
<div class=container>
<header class=header>
<span class=header__inner>
<a href=/ class=logo style=text-decoration:none>
<span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span>
<span class=logo__text>Esoye</span>
<span class=logo__cursor></span>
</a>
<span class=header__right>
<nav class=menu>
<ul class="menu__inner menu__inner--desktop">
<li><a href=/about>About</a></li>
<li><a href=/archive>Archive</a></li>
<li><a href=/showcase>Showcase</a></li>
</ul>
<ul class="menu__inner menu__inner--mobile">
<li><a href=/about>About</a></li>
<li><a href=/archive>Archive</a></li>
<li><a href=/showcase>Showcase</a></li>
</ul>
</nav>
<span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span>
<span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg>
</span>
</span>
</span>
</header>
<div class=content>
<div class=posts>
<div class="post on-list">
<h1 class=post-title><a href=https://Esoye.github.io/posts/readbooks/leveldb/>LevelDB源码阅读</a></h1>
<div class=post-meta>
<span class=post-date>
2022-05-15
</span>
</div>
<span class=post-tags>
<a href=https://Esoye.github.io/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/>#源码阅读</a>&nbsp;
<a href=https://Esoye.github.io/tags/leveldb/>#LevelDB</a>&nbsp;
</span>
<div class=post-content>
read: d019e3605f222ebc5a3a2484a2cb29db537551dd 小且完整的工业存储实现，其中有许多细节是可以借鉴的。这里没有完整的深入每一行代码，后续会时不时的慢慢补充
2022-05-17 初步阅读代码，了解组件及大致执行逻辑 编译 # git clone --recurse-submodules https://github.com/google/leveldb.git cd leveldb VSCode安装cmake插件之后，打开项目，cmake插件自动配置，此时使用shift+p设置cmake: set build target之后，再使用shift+p选择cmake: build即可编译目标模块，d019e3605f222ebc5a3a2484a2cb29db537551dd中测试文件进行了调整，全部合并到leveldb_tests中，调试时按照想要了解的模块，自己注释其他测试文件，重新编译即可。此时可以在文件中断点调试，或者使用gdb调试
slice # 字符串的浅拷贝实现，使用一个指针和指针长度实现，类似c++后来实现的string_view，如果使用string，则在传递数据的时候会进行拷贝操作，有性能损失。另一个目的是为了自主可控，确保数据在传输的过程中不会造成太多的数据副本。所以拷贝构造函数使用的是默认的系统函数，使用浅拷贝
Slice(const Slice&) = default; Slice& operator=(const Slice&) = default; status # 自定义信息模块，把状态码和状态信息进行压缩，压缩格式如下
Status::Status(Code code, const Slice& msg, const Slice& msg2) { assert(code != kOk); const uint32_t len1 = static_cast&lt;uint32_t>(msg.size()); const uint32_t len2 = static_cast&lt;uint32_t>(msg2.size()); const uint32_t size = len1 + (len2 ? (2 + len2) : 0); char* result = new char[size + 5]; std::memcpy(result, &size, sizeof(size)); result[4] = static_cast&lt;char>(code); std::memcpy(result + 5, msg.
</div>
<div><a class="read-more button" href=/posts/readbooks/leveldb/>Read more →</a></div>
</div>
<div class="post on-list">
<h1 class=post-title><a href=https://Esoye.github.io/posts/readbooks/volcanooptimizer/>VolcanoOptimizer</a></h1>
<div class=post-meta>
<span class=post-date>
2022-04-04
</span>
</div>
<div class=post-content>
NOTE # 论文阅读笔记The Volcano Optimizer Generator: Extensibility and Efficient Search
可扩展
面向对象
自顶向下
剪枝
原型是EXODUS， Volcano是对他的改进
可以单独使用的优化器 优化搜索时间和搜索空间 可扩展 可以使用启发式算法和有效的代价模型来扩展和减少搜索空间，【剪枝】 灵活的成本计算模型 一个框架，优化器生成器，可以由“optimizer implementor”自行实现关键函数，整个优化器框架的输入是AST，输出是一个执行计划，算子的集合
SQL是基于关系代数，Volcano把关系表达式分为逻辑表达式和物理表达式，逻辑表达式之间使用transformation进行转换，物理表达式使用基于代价的implementation和逻辑表达式映射的，关系不一定是意义对应的，例如scan可以同时一起实现projection
在表达式进行转换的时候可以使用condition进行模式判断，满足条件的时候可以进行变换
表达式使用特征描述输出，
enforcers会强制添加某属性，用于指导优化器进行优化，例如指定表的scan方式
Logical Operator
Operator set，也就是可以描述在目标data model上可以执行的代数运算合
Transformation rules + Condition，对每条等价变换规则，在满足condition时才可以应用
Logical properties : 逻辑属性，用来描述代数运算的输出所具有的一些特征，这些特征与运算的具体执行方式无关，是逻辑的，例如输出的行数，结果集的schema等
Physical Operator
Algorithm + Enforcer set，即可应用的物理实现算法 + 可添加的Enforcer集合
</div>
<div><a class="read-more button" href=/posts/readbooks/volcanooptimizer/>Read more →</a></div>
</div>
<div class="post on-list">
<h1 class=post-title><a href=https://Esoye.github.io/posts/readbooks/columbia-optimizer/>Columbia Optimizer</a></h1>
<div class=post-meta>
<span class=post-date>
2022-04-02
</span>
</div>
<div class=post-content>
</div>
<div><a class="read-more button" href=/posts/readbooks/columbia-optimizer/>Read more →</a></div>
</div>
<div class="post on-list">
<h1 class=post-title><a href=https://Esoye.github.io/posts/bigdata/log/>面试</a></h1>
<div class=post-meta>
<span class=post-date>
2022-03-24
</span>
</div>
<div class=post-content>
面试 # 只是一个技术汇总
C++基础 [2 days] [课程- https://github.com/parallel101/course.git]
内存 内存结构 [https://segmentfault.com/a/1190000039348996]
c++ 编译出来的是可执行文件，是ELF格式的，他本来就有一些格式上的划分，C++在他的基础上进行了更细的划分，分为五个部分，从高地址到底地址依次为： 1. 内核虚拟内存 进程的虚拟印象 2. 栈 程序自动控制，具体为程序的函数调用，保存局部变量，有大小，可以使用ulimit -s 查看，也可以自行设置，但是建议系统默认即可 * 函数调用机制 调用的时候是一个一个的栈帧，函数参数会在调用者的栈帧中开辟空间，从右到左，所以函数列表的默认值必须从右到左的初始化， 可能和这个有关系，然后被调用者构造栈帧，依次执行 3. 共享库的内存印象 3. 堆 空间有程序员自行维护，向上增长(TIPS: 由于C的历史原因，C++的内存结构还是说堆区，但是在区别new/malloc 和delete/free 的时候，他们的差别之一可能会在内存上有点区别 C的malloc/free可能会说是在堆上分配空间，但是对于C++可能会说的是在自由存储区上分配，自由存储区和堆是不同的概念，堆是操作系统上的概念，但是自由存储区是一个抽象概念 一般new可以是在堆上分配空间，但是可能存在在其他情况，例如在栈上使用new，所以他们不是一个概念，面试的时候说到这里，可以装逼😎) 4. 可写/全局区 对应elf中data段和bss段，data段保存的是已初始化的全局变量或者静态变量，bss保存的是未初始化的数据 5. 只读区 text段，保存编译之后的指令，不可变 6. 常量区 保存全局变量，不可变，rodata段，记得使用其他手段去尝试修改常量的时候会报错。 TIPS: const修饰的参数不一定是常量，例如他修饰一个函数的参数的时候，参数还是只是在栈中，只是约定不能修改。 7.
</div>
<div><a class="read-more button" href=/posts/bigdata/log/>Read more →</a></div>
</div>
<div class=pagination>
<div class=pagination__buttons>
<span class="button previous">
<a href=/page/3/>
<span class=button__icon>←</span>
<span class=button__text>Newer posts</span>
</a>
</span>
<span class="button next">
<a href=/page/5/>
<span class=button__text>Older posts</span>
<span class=button__icon>→</span>
</a>
</span>
</div>
</div>
</div>
</div>
<footer class=footer>
<div class=footer__inner>
<a href=/ class=logo style=text-decoration:none>
<span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span>
<span class=logo__text>Esoye</span>
<span class=logo__cursor></span>
</a>
<div class=copyright>
<span>© 2022 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span>
</div>
</div>
</footer>
<script src=https://Esoye.github.io/assets/main.js></script>
<script src=https://Esoye.github.io/assets/prism.js></script>
</div>
</body>
</html>