<!doctype html><html lang=zh-cn><head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><meta charset=utf-8><meta name=generator content="Hugo 0.92.1"><meta name=theme-color content="#16171d"><meta name=color-scheme content="light dark"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no, date=no, address=no, email=no"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><title>VolcanoOptimizer | Wakak</title><link rel=stylesheet href=/css/meme.min.1b6ee04060cad065b8297da49efc0afd7df2746bf3de07dcc16ed38df2626334.css><script src=/js/meme.min.4c8facfc8134c52bd7bf6bbfa3a7e68b06b47ae04968222e28e7831f5b1a7592.js></script>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&family=Noto+Serif+SC:wght@400;500;700&family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&display=swap" media=print onload="this.media='all'"><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&family=Noto+Serif+SC:wght@400;500;700&family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&display=swap"></noscript><meta name=author content="Wakaka"><meta name=description content="NOTE è®ºæ–‡é˜…è¯»ç¬”è®°The Volcano Optimizer Generator: Extensibility and Efficient Search å¯æ‰©å±• é¢å‘å¯¹è±¡ è‡ªé¡¶å‘ä¸‹ å‰ªæ åŸå‹æ˜¯EXODUSï¼Œ Voâ€¦â€¦"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=mask-icon href=/icons/safari-pinned-tab.svg color=#2a6df4><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="Wakak"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=mobile-web-app-capable content="yes"><meta name=application-name content="Wakak"><meta name=msapplication-starturl content="../../../"><meta name=msapplication-TileColor content="#fff"><meta name=msapplication-TileImage content="../../../icons/mstile-150x150.png"><link rel=manifest href=/manifest.json><link rel=canonical href=https://poorguyorz.github.io/posts/readbooks/volcanooptimizer/><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2022-04-04T22:10:50+08:00","dateModified":"2022-05-30T10:32:28+08:00","url":"https://poorguyorz.github.io/posts/readbooks/volcanooptimizer/","headline":"VolcanoOptimizer","description":"NOTE è®ºæ–‡é˜…è¯»ç¬”è®°The Volcano Optimizer Generator: Extensibility and Efficient Search å¯æ‰©å±• é¢å‘å¯¹è±¡ è‡ªé¡¶å‘ä¸‹ å‰ªæ åŸå‹æ˜¯EXODUSï¼Œ Voâ€¦â€¦","inLanguage":"zh-CN","articleSection":"posts","wordCount":2919,"image":"https://poorguyorz.github.io/icons/apple-touch-icon.png","author":{"@type":"Person","description":"Viva La Vida","email":"a_designer@qq.com","image":"https://poorguyorz.github.io/icons/apple-touch-icon.png","url":"https://poorguyorz.github.io/","name":"Wakaka"},"license":"[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)","publisher":{"@type":"Organization","name":"Wakak","logo":{"@type":"ImageObject","url":"https://poorguyorz.github.io/icons/apple-touch-icon.png"},"url":"https://poorguyorz.github.io/"},"mainEntityOfPage":{"@type":"WebSite","@id":"https://poorguyorz.github.io/"}}</script><meta property="og:title" content="VolcanoOptimizer"><meta property="og:description" content="NOTE è®ºæ–‡é˜…è¯»ç¬”è®°The Volcano Optimizer Generator: Extensibility and Efficient Search å¯æ‰©å±• é¢å‘å¯¹è±¡ è‡ªé¡¶å‘ä¸‹ å‰ªæ åŸå‹æ˜¯EXODUSï¼Œ Voâ€¦â€¦"><meta property="og:url" content="https://poorguyorz.github.io/posts/readbooks/volcanooptimizer/"><meta property="og:site_name" content="Wakak"><meta property="og:locale" content="zh"><meta property="og:image" content="https://poorguyorz.github.io/icons/apple-touch-icon.png"><meta property="og:type" content="article"><meta property="article:published_time" content="2022-04-04T22:10:50+08:00"><meta property="article:modified_time" content="2022-05-30T10:32:28+08:00"><meta property="article:section" content="posts"></head><body><div class="container bgimages"><header class=header><div class=header-wrapper><div class="header-inner single"><div class=site-brand><a href=/ class=brand>Wakak</a></div><nav class=nav><ul class=menu id=menu><li class="menu-item active"><a href=/posts/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon archive"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7.0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6.0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6.0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3.0 64v48c0 8.8 7.2 16 16 16h480c8.8.0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg><span class=menu-item-name>Posts</span></a></li><li class=menu-item><a href=/tags/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="icon tags"><path d="M497.941 225.941 286.059 14.059A48 48 0 00252.118.0H48C21.49.0.0 21.49.0 48v204.118a48 48 0 0014.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882.0l204.118-204.118c18.745-18.745 18.745-49.137.0-67.882zM112 160c-26.51.0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882.0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397.0h48.721a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882z"/></svg><span class=menu-item-name>Tags</span></a></li><li class=menu-item><a id=theme-switcher href=#><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-light"><path d="M193.2 104.5 242 7a18 18 0 0128 0l48.8 97.5L422.2 70A18 18 0 01442 89.8l-34.5 103.4L505 242a18 18 0 010 28l-97.5 48.8L442 422.2A18 18 0 01422.2 442l-103.4-34.5L270 505a18 18 0 01-28 0l-48.8-97.5L89.8 442A18 18 0 0170 422.2l34.5-103.4-97.5-48.8a18 18 0 010-28l97.5-48.8L70 89.8A18 18 0 0189.8 70zM256 128a128 128 0 10.01.0M256 160a96 96 0 10.01.0"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-dark"><path d="M27 412A256 256 0 10181 5a11.5 11.5.0 00-5 20A201.5 201.5.0 0142 399a11.5 11.5.0 00-15 13"/></svg></a></li></ul></nav></div></div><input type=checkbox id=nav-toggle aria-hidden=true>
<label for=nav-toggle class=nav-toggle></label>
<label for=nav-toggle class=nav-curtain></label></header><main class="main single" id=main><div class=main-inner><article class="content post h-entry" data-align=justify data-type=posts><h1 class="post-title p-name">VolcanoOptimizer</h1><div class=post-meta><time datetime=2022-04-04T22:10:50+08:00 class="post-meta-item published dt-published"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6.0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h48c26.5.0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3.0 6-2.7 6-6z"/></svg>&nbsp;2022.4.4</time>
<span class="post-meta-item wordcount"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3.0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9.0l60.1 60.1c18.8 18.7 18.8 49.1.0 67.9zM284.2 99.8 21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3.0-17l-111-111c-4.8-4.7-12.4-4.7-17.1.0zM124.1 339.9c-5.5-5.5-5.5-14.3.0-19.8l154-154c5.5-5.5 14.3-5.5 19.8.0s5.5 14.3.0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8.0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&nbsp;2919</span>
<span class="post-meta-item reading-time"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5.0-2e2-89.5-2e2-2e2S145.5 56 256 56s2e2 89.5 2e2 2e2-89.5 2e2-2e2 2e2zm61.8-104.4-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6.0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;6&nbsp;åˆ†é’Ÿ</span></div><div class="post-body e-content"><h1 id=note>NOTE</h1><p style=text-indent:0><span class=drop-cap>è®º</span>æ–‡é˜…è¯»ç¬”è®°<a href=http://www.cse.iitb.ac.in/infolab/Data/Courses/CS632/Papers/Volcano-graefe.pdf target=_blank rel=noopener>The Volcano Optimizer Generator: Extensibility and Efficient Search</a></p><ul><li><p>å¯æ‰©å±•</p></li><li><p>é¢å‘å¯¹è±¡</p></li><li><p>è‡ªé¡¶å‘ä¸‹</p></li><li><p>å‰ªæ</p></li><li><p>åŸå‹æ˜¯EXODUSï¼Œ Volcanoæ˜¯å¯¹ä»–çš„æ”¹è¿›</p><ul><li>å¯ä»¥å•ç‹¬ä½¿ç”¨çš„ä¼˜åŒ–å™¨</li><li>ä¼˜åŒ–æœç´¢æ—¶é—´å’Œæœç´¢ç©ºé—´</li><li>å¯æ‰©å±•</li><li>å¯ä»¥ä½¿ç”¨å¯å‘å¼ç®—æ³•å’Œæœ‰æ•ˆçš„ä»£ä»·æ¨¡å‹æ¥æ‰©å±•å’Œå‡å°‘æœç´¢ç©ºé—´ï¼Œã€å‰ªæã€‘</li><li>çµæ´»çš„æˆæœ¬è®¡ç®—æ¨¡å‹</li></ul></li><li><p>ä¸€ä¸ªæ¡†æ¶ï¼Œä¼˜åŒ–å™¨ç”Ÿæˆå™¨ï¼Œå¯ä»¥ç”±â€œoptimizer implementorâ€è‡ªè¡Œå®ç°å…³é”®å‡½æ•°ï¼Œæ•´ä¸ªä¼˜åŒ–å™¨æ¡†æ¶çš„è¾“å…¥æ˜¯ASTï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªæ‰§è¡Œè®¡åˆ’ï¼Œç®—å­çš„é›†åˆ</p></li><li><p>SQLæ˜¯åŸºäºå…³ç³»ä»£æ•°ï¼ŒVolcanoæŠŠå…³ç³»è¡¨è¾¾å¼åˆ†ä¸ºé€»è¾‘è¡¨è¾¾å¼å’Œç‰©ç†è¡¨è¾¾å¼ï¼Œé€»è¾‘è¡¨è¾¾å¼ä¹‹é—´ä½¿ç”¨transformationè¿›è¡Œè½¬æ¢ï¼Œç‰©ç†è¡¨è¾¾å¼ä½¿ç”¨åŸºäºä»£ä»·çš„implementationå’Œé€»è¾‘è¡¨è¾¾å¼æ˜ å°„çš„ï¼Œå…³ç³»ä¸ä¸€å®šæ˜¯æ„ä¹‰å¯¹åº”çš„ï¼Œä¾‹å¦‚scanå¯ä»¥åŒæ—¶ä¸€èµ·å®ç°projection</p></li><li><p>åœ¨è¡¨è¾¾å¼è¿›è¡Œè½¬æ¢çš„æ—¶å€™å¯ä»¥ä½¿ç”¨conditionè¿›è¡Œæ¨¡å¼åˆ¤æ–­ï¼Œæ»¡è¶³æ¡ä»¶çš„æ—¶å€™å¯ä»¥è¿›è¡Œå˜æ¢</p></li><li><p>è¡¨è¾¾å¼ä½¿ç”¨ç‰¹å¾æè¿°è¾“å‡ºï¼Œ</p></li><li><p>enforcersä¼šå¼ºåˆ¶æ·»åŠ æŸå±æ€§ï¼Œç”¨äºæŒ‡å¯¼ä¼˜åŒ–å™¨è¿›è¡Œä¼˜åŒ–ï¼Œä¾‹å¦‚æŒ‡å®šè¡¨çš„scanæ–¹å¼</p></li></ul><p>Logical Operator<br>Operator setï¼Œä¹Ÿå°±æ˜¯å¯ä»¥æè¿°åœ¨ç›®æ ‡data modelä¸Šå¯ä»¥æ‰§è¡Œçš„ä»£æ•°è¿ç®—åˆ<br>Transformation rules + Conditionï¼Œå¯¹æ¯æ¡ç­‰ä»·å˜æ¢è§„åˆ™ï¼Œåœ¨æ»¡è¶³conditionæ—¶æ‰å¯ä»¥åº”ç”¨<br>Logical properties : é€»è¾‘å±æ€§ï¼Œç”¨æ¥æè¿°ä»£æ•°è¿ç®—çš„è¾“å‡ºæ‰€å…·æœ‰çš„ä¸€äº›ç‰¹å¾ï¼Œè¿™äº›ç‰¹å¾ä¸è¿ç®—çš„å…·ä½“æ‰§è¡Œæ–¹å¼æ— å…³ï¼Œæ˜¯é€»è¾‘çš„ï¼Œä¾‹å¦‚è¾“å‡ºçš„è¡Œæ•°ï¼Œç»“æœé›†çš„schemaç­‰</p><p>Physical Operator<br>Algorithm + Enforcer setï¼Œå³å¯åº”ç”¨çš„ç‰©ç†å®ç°ç®—æ³• + å¯æ·»åŠ çš„Enforceré›†åˆ<br>Implementation rules + Conditionï¼Œæ»¡è¶³Conditionçš„å‰æä¸‹ï¼Œå¯ä»¥å°è¯•è¯¥ç‰©ç†ç®—æ³•<br>Cost model + Cost formulaï¼ŒåŸºäºcosté€‰æ‹©æœ€ä¼˜çš„ç‰©ç†ç®—æ³•<br>Physical propertyï¼Œä¸logical propertyå¯¹åº”ï¼Œç‰©ç†å±æ€§æ˜¯é€‰æ‹©äº†ç‰¹å®šçš„ç®—æ³•å®ç°åï¼Œè¾“å‡ºçš„æ•°æ®æ‰€å…·æœ‰çš„ç‰©ç†ä¸Šçš„ç‰¹æ€§ï¼Œä¾‹å¦‚æ•°æ®æ˜¯å¦æœ‰åºã€æ˜¯å¦å…·æœ‰å”¯ä¸€æ€§ï¼Œæ•°æ®åœ¨å¤šæœºä¸Šçš„åˆ†å¸ƒæƒ…å†µç­‰ï¼Œä¸åŒçš„ç‰©ç†ç®—æ³•ï¼Œä¼šå†³å®šæ‰§è¡Œè¯¥operatoräº§ç”Ÿçš„ç‰©ç†å±æ€§ï¼Œä¾‹å¦‚sort merge joinä¼šåœ¨join keyä¸Šäº§ç”Ÿæœ‰åºå±æ€§<br>Applicability function : å†³å®šä¸€ä¸ªç‰©ç†ç®—æ³•ï¼Œå…¶è¾“å‡ºæ˜¯å¦å¯ä»¥æ»¡è¶³è¦æ±‚çˆ¶ç®—å­å¯¹è‡ªèº«çš„physical propertyè¦æ±‚ï¼Œä¸”å†³å®šå®ƒå¯¹è‡ªèº«çš„è¾“å…¥å…·æœ‰ä»€ä¹ˆæ ·çš„physical propertyè¦æ±‚<br>Enforceræ˜¯search engineä¸­ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå®ƒç”¨æ¥å¼ºåˆ¶äº§ç”ŸæŸç§ç‰©ç†å±æ€§ã€‚ä¾‹å¦‚ä¸Šå±‚æ˜¯joinç®—å­ï¼Œåœ¨æšä¸¾æ—¶ä¼šè€ƒè™‘ä½¿ç”¨sort merge joinçš„ç‰©ç†æ‰§è¡Œæ–¹å¼(Implementationï¼‰ï¼Œä½†å½“é€’å½’åˆ°ä¸‹å±‚æ—¶ï¼Œå­èŠ‚ç‚¹å¯ä»¥é€‰æ‹©table scanï¼ˆæ— åºè¾“å‡ºï¼‰ï¼Œæˆ–è€…index scanï¼ˆç›®æ ‡åºè¾“å‡ºï¼‰ï¼Œå½“é€‰æ‹©table scanæ—¶ï¼Œç”±äºè¾“å‡ºä¸æ»¡è¶³çˆ¶ç®—å­å¯¹è‡ªèº«è¾“å‡ºçš„ç‰©ç†å±æ€§è¦æ±‚ï¼Œå°±å¯ä»¥é€šè¿‡Order Enforceræ¥äº§ç”Ÿç›®æ ‡è¾“å‡ºï¼ŒEnforcerè¡¨ç¤ºäº†æ’åºè¿™ä¸ªæ“ä½œï¼ŒåŒæ—¶ä¹ŸåŒ…å«äº†æ’åºæ“ä½œä¼šäº§ç”Ÿçš„ä»£ä»·ã€‚</p><h2 id=the--search--engine>The Search Engine</h2><p>æœç´¢å®ç°</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=c1>// PhysPropï¼šï¼š æ­¤LogExpré”å…·æœ‰çš„ç‰©ç†å±æ€§çš„è¦æ±‚
</span><span class=c1></span><span class=n>FindBestPlan</span> <span class=p>(</span><span class=n>LogExpr</span><span class=p>,</span> <span class=n>PhysProp</span><span class=p>,</span> <span class=n>Limit</span><span class=p>)</span> 
    <span class=c1>// å¦‚æœå¯ä»¥åœ¨look-up tableæ‰¾åˆ°æ»¡è¶³çš„è®¡åˆ’ï¼Œåˆ™ä»£è¡¨ä»¥åŠç®—è¿‡ï¼Œç›´æ¥è¿”å›
</span><span class=c1></span>    <span class=k>if</span> <span class=n>the</span> <span class=n>pair</span> <span class=n>LogExpr</span> <span class=n>and</span> <span class=n>PhysProp</span> <span class=n>is</span> <span class=n>in</span> <span class=n>the</span> <span class=n>look</span><span class=o>-</span><span class=n>up</span> <span class=n>table</span> 
      <span class=k>if</span> <span class=n>the</span> <span class=n>cost</span> <span class=n>in</span> <span class=n>the</span> <span class=n>look</span><span class=o>-</span><span class=n>up</span> <span class=n>table</span> <span class=o>&lt;</span> <span class=n>Limit</span> 
          <span class=k>return</span> <span class=n>Plan</span> <span class=n>and</span> <span class=n>Cost</span> 
      <span class=k>else</span> 
          <span class=k>return</span> <span class=n>failure</span> 

    <span class=cm>/* else: optimization required */</span>
    <span class=c1>// å¦åˆ™è¿›è¡Œä¼˜åŒ–ï¼Œç”±ä¸‰ç§ä¼˜åŒ–æ–¹å¼
</span><span class=c1></span>    <span class=c1>//  1. ä½¿ç”¨è½¬æ¢æ–¹æ³•è½¬æ¢ä¸ºç­‰ä»·çš„é€»è¾‘è¡¨è¾¾å¼ï¼Œä¸”ä½¿ç”¨ç›¸åŒç‰©ç†å±æ€§è®¡ç®—
</span><span class=c1></span>    <span class=c1>//  2. ä½¿ç”¨å®ç°æ–¹æ³•ç”Ÿæˆç‰©ç†è¡¨è¾¾å¼ï¼Œæ­¤å¤„æ˜¯æœ¬å±‚çš„ç‰©ç†è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ä¼šé€’å½’è°ƒç”¨ï¼Œä¸”è®¡ç®—æœ¬å±‚ä»£ä»·TotalCostï¼Œæ­¤æ—¶æ˜¯ä½¿ç”¨
</span><span class=c1></span>    <span class=c1>//        ä»£ä»·æ¨¡å‹è®¡ç®—ä»£ä»·ä¸”ä½¿ç”¨å‰ªæ
</span><span class=c1></span>    <span class=c1>//        Applicability functioå†³å®šImplementationæ˜¯å¦æ»¡è¶³PhysProp
</span><span class=c1></span>    <span class=c1>//  3. ä½¿ç”¨enforcerï¼Œè®¡ç®—enforcerçš„ä»£ä»·ï¼Œä¸”ä¿®æ”¹PhysPropä¸ºæ»¡è¶³enforcerçš„PhysPropï¼Œä½¿ç”¨æ–°çš„PhysPropè®¡ç®—LogExpr
</span><span class=c1></span>    <span class=n>create</span> <span class=n>the</span> <span class=n>set</span> <span class=n>of</span> <span class=n>possible</span> <span class=s>&#34;moves&#34;</span> <span class=n>from</span> 
        <span class=o>-</span> <span class=n>applicable</span> <span class=n>transformations</span> 
        <span class=o>-</span> <span class=n>algorithms</span> <span class=n>that</span> <span class=n>give</span> <span class=n>the</span> <span class=n>required</span> <span class=n>PhysProp</span> 
        <span class=o>-</span> <span class=n>enforcers</span> <span class=k>for</span> <span class=n>required</span> <span class=n>PhysProp</span> 
    <span class=n>order</span> <span class=n>the</span> <span class=n>set</span> <span class=n>of</span> <span class=n>moves</span> <span class=n>by</span> <span class=n>promise</span> 
    <span class=k>for</span> <span class=n>the</span> <span class=n>most</span> <span class=n>promising</span> <span class=n>moves</span> 
        <span class=k>if</span> <span class=n>the</span> <span class=n>move</span> <span class=n>uses</span> <span class=n>a</span>  <span class=n>transformation</span> 
            <span class=n>apply</span> <span class=n>the</span> <span class=n>transformation</span> <span class=n>creating</span> <span class=n>NewLogExpr</span> 
            <span class=n>call</span> <span class=n>FindBestPlan</span> <span class=p>(</span><span class=n>NewLogExpr</span><span class=p>,</span> <span class=n>PhysProp</span><span class=p>,</span> <span class=n>Limit</span><span class=p>)</span> 
        <span class=k>else</span> <span class=k>if</span> <span class=n>the</span> <span class=n>move</span> <span class=n>uses</span> <span class=n>an</span> <span class=n>algorithm</span>
            <span class=nl>TotalCost</span> <span class=p>:</span><span class=o>=</span> <span class=n>cost</span> <span class=n>of</span> <span class=n>the</span> <span class=n>algorithm</span> 
            <span class=k>for</span> <span class=n>each</span> <span class=n>input</span> <span class=n>I</span> <span class=k>while</span> <span class=n>TotalCost</span> <span class=o>&lt;</span> <span class=n>Limit</span> 
                <span class=n>determine</span> <span class=n>required</span> <span class=n>physical</span> <span class=n>properties</span> <span class=n>PP</span> <span class=k>for</span> <span class=n>I</span> 
                <span class=n>Cost</span> <span class=o>=</span> <span class=n>FindBestPlan</span> <span class=p>(</span><span class=n>I</span><span class=p>,</span> <span class=n>PP</span><span class=p>,</span> <span class=n>Limit</span> <span class=o>-</span>  <span class=n>TotalCost</span><span class=p>)</span> 
                <span class=n>add</span> <span class=n>Cost</span> <span class=n>to</span> <span class=n>TotalCost</span> 
        <span class=k>else</span><span class=cm>/* move uses an enforcer */</span> 
            <span class=nl>TotalCost</span> <span class=p>:</span><span class=o>=</span> <span class=n>cost</span> <span class=n>of</span> <span class=n>the</span> <span class=n>enforcer</span> 
            <span class=n>modify</span> <span class=n>PhysProp</span> <span class=k>for</span> <span class=n>enforced</span> <span class=n>property</span> 
            <span class=n>call</span> <span class=n>FindBestPlan</span> <span class=k>for</span> <span class=n>LogExpr</span> <span class=n>with</span> <span class=k>new</span> <span class=n>PhysProp</span> 
        <span class=cm>/* maintain the look-up table of explored facts */</span> 

    <span class=c1>//  å¦‚æœæ²¡æœ‰åœ¨look-up tableæ‰¾åˆ°æ»¡è¶³çš„è®¡åˆ’ï¼Œåˆ™insert
</span><span class=c1></span>    <span class=k>if</span> <span class=n>LogExpr</span> <span class=n>is</span> <span class=n>not</span> <span class=n>in</span> <span class=n>the</span> <span class=n>look</span><span class=o>-</span><span class=n>up</span> <span class=n>table</span> 
        <span class=n>insert</span> <span class=n>LogExpr</span> <span class=n>into</span> <span class=n>the</span> <span class=n>look</span><span class=o>-</span><span class=n>up</span> <span class=n>table</span> 

    <span class=c1>//  è®°å½•å·¦å³æ‰§è¡Œè®¡åˆ’
</span><span class=c1></span>    <span class=n>insert</span> <span class=n>PhysProp</span> <span class=n>and</span> <span class=n>best</span> <span class=n>plan</span> <span class=n>found</span> <span class=n>into</span> <span class=n>look</span><span class=o>-</span><span class=n>up</span> <span class=n>table</span> 
    <span class=k>return</span> <span class=n>best</span> <span class=n>Plan</span> <span class=n>and</span> <span class=n>Cost</span>

</code></pre></td></tr></table></div></div></div><p>è‡ªå®šå‘ä¸‹çš„æœç´¢ï¼Œä½¿ç”¨ä¸‰ç§è§„åˆ™å‘ä¸‹æ‰©å±•æœç´¢ç©ºé—´ï¼Œä½¿ç”¨look-up tableè®°å½•å·²æœç´¢çš„è¡¨è¾¾å¼ï¼Œåœ¨è¡¨è¾¾å¼æ²¡æœ‰æ–°çš„æ‰©å±•æ–¹æ³•ï¼Œæˆ–è€…è¾¾åˆ°ä»£ä»·é˜ˆå€¼çš„æ—¶å€™åœæ­¢æœç´¢ï¼Œ</p><h2 id=è‡ªé¡¶å‘ä¸‹å’Œè‡ªåº•å‘ä¸Š>è‡ªé¡¶å‘ä¸‹å’Œè‡ªåº•å‘ä¸Š</h2><ul><li>è‡ªé¡¶å‘ä¸‹
volcanoï¼Œcascadesç­‰<ol><li>åœ¨ç­‰ä»·å˜å½¢çš„èŒƒå›´ä¸ä»…ä»…é™äºjoinï¼Œå…³ç³»ä»£æ•°çš„ç­‰ä»·å˜æ¢éƒ½å¯ä»¥å®ç°ï¼Œæ‰€ä»¥ç†è®ºä¸Šï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨ä¸€äº›å¯å‘å¼çš„ç®—æ³•ï¼Œè€Œä¸å¿…è¦è¿›è¡Œåˆ†å±‚</li><li>å¯ä»¥åœ¨ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­åŸºäºä»£ä»·æ¨¡å‹è¿›è¡Œå‰ªæ</li></ol></li><li>è‡ªåº•å‘ä¸Š
å‡ ä¹ä¼šæšä¸¾æ‰€æœ‰çš„æ‰§è¡Œè®¡åˆ’ï¼Œç”±æ›´å¤§çš„æœç´¢ç©ºé—´ï¼Œä¸”ç”±äºåœ¨ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­æ›´å¤šçš„åªæ˜¯ä¸ºäº†æœç´¢join order çš„æ‰§è¡Œè®¡åˆ’ï¼Œæ‰€ä»¥éœ€è¦æå‰è¿›è¡Œä¸€äº›å¯å‘å¼çš„ç®—æ³•ï¼Œæˆ–ä¼˜åŒ–è¯­å¥ç»“æ„ä¾¿äºä¼˜åŒ–å™¨ä¼˜åŒ–ï¼Œæˆ–æå‰æœç´¢åˆ°æ‰§è¡Œè®¡åˆ’ç»“æŸä¼˜åŒ–è¿‡ç¨‹ã€‚</li></ul><h1 id=the-cascades-framework-for-query-optimization>[The Cascades Framework for Query Optimization]</h1><p>å¯¹äºvolcanoçš„æ”¹è¿›å’Œä¼˜åŒ–</p><ul><li>æŠŠåŸæ¥çš„æœç´¢æµç¨‹æ‹†åˆ†ä¸ºå•ä¸ªçš„taskï¼Œä½¿ç”¨æ ˆæ¥å®ç°ï¼Œtaskä¹‹é—´ä½¿ç”¨ä¸€ä¸ªDGAæ¥ç»´æŠ¤è°ƒåº¦å…³ç³»</li><li>ä¸åŒºåˆ†é€»è¾‘è¡¨è¾¾å¼å’Œç‰©ç†è¡¨è¾¾å¼æ˜¯</li><li>ruleæŠ½è±¡ä¸ºtaskï¼Œæ˜¯å…·ä½“çš„å¯¹è±¡ï¼Œapply çš„æ—¶å€™åŒºåˆ†è¡¨è¾¾ç±»å‹</li></ul><p>groupï¼š
ç­‰ä»·è¡¨è¾¾å¼çš„é›†åˆ
exprï¼š
è¡¨è¾¾å¼ï¼Œç­‰ä»·è¡¨è¾¾å¼ä½¿ç”¨ç‰¹å¾è¾“å…¥å’Œç‰¹å¾è¾“å‡ºæ¥è¡¨ç¤ºï¼Œè¡¨è¾¾å¼çš„è¾“å…¥å¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯groupï¼Œå¯ä»¥è§†ä¸ºæ‰§è¡Œè®¡åˆ’ä¸­çš„ä¸€ä¸ªç‰‡æ®µã€‚
rule
æŠ½è±¡å®ç°ï¼Œåˆ†ä¸ºé€»è¾‘è¡¨è¾¾å¼çš„è½¬æ¢ruleå’Œé€»è¾‘è¡¨è¾¾å¼è½¬æ¢åˆ°ç‰©ç†è¡¨è¾¾å¼çš„Implementation rule
æ˜¯å¦å¯ä»¥é€‚ç”¨æŸä¸ªruleéœ€è¦åˆ¤æ–­è¡¨è¾¾å¼å¯ä»¥æ»¡è¶³ruleçš„æŸäº›è¦æ±‚çš„è§„åˆ™ï¼Œè¿™ä¸ªè§„åˆ™æŠ½è±¡ä¸ºpatternï¼Œå¦‚æœæ»¡è¶³patternï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ­¤è½¬æ¢æ–¹æ³•è½¬æ¢è¡¨è¾¾å¼ï¼Œè½¬æ¢ä¹‹åçš„è¡¨è¾¾å¼ç§°ä¸ºSubstitution</p><ul><li>OptimizeGroupTask
ä¼˜åŒ–ä»»åŠ¡çš„å…¥å£ï¼Œåˆå§‹åŒ–çš„æ—¶å€™æ˜¯æ•´ä¸ªastçš„é›†åˆ</li><li>OptimizeExprTask
å¯¹äºgroupä¸­çš„æ‰€æœ‰çš„è¡¨è¾¾å¼ï¼Œä¸€ä¸ªè¡¨è¾¾å¼å¯èƒ½åªæ˜¯å•çº¯çš„è¡¨è¾¾å¼ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ç”±å…¶ä»–groupä½œä¸ºè¾“å…¥çš„è¡¨è¾¾å¼ï¼Œæ‰€ä»¥<ol><li>éƒ½è¡¨è¾¾å¼ä½¿ç”¨ApplyRuleTaskå…¥æ ˆ</li><li>å¯¹äºæ‰€æœ‰è¡¨è¾¾å¼ä¸­çš„groupï¼Œä½¿ç”¨ExploreGroupTaskå…¥æ ˆï¼Œæ­¤æ—¶å¯¹äºæ­¤èŠ‚ç‚¹ï¼Œä¼šå…ˆå®ŒæˆExploreGroupTaskï¼Œç„¶åå†ä½¿ç”¨ApplyRuleTask</li><li>å¦‚æœæ˜¯ç‰©ç†è¡¨è¾¾å¼ï¼Œåˆ™ä½¿ç”¨CreatePlanTask</li></ol></li><li>ApplyRuleTask
å¯¹è¡¨è¾¾å¼ä½¿ç”¨ruleè½¬æ¢ï¼Œä½¿ç”¨nextSubstituteä¹‹åå¾—åˆ°Substitutionï¼Œå¯ä»¥å¯¹æ–°çš„è¡¨è¾¾å¼ä½¿ç”¨<ol><li>ExploreExprTask</li><li>OptimizeExprTask</li><li>CreatePlanTask å¦‚æœæ˜¯é€»è¾‘è¡¨è¾¾å¼ï¼Œåˆ™ä½¿ç”¨CreatePlanTask</li></ol></li><li>ExploreGroupTask
å¯¹groupä¸­çš„æ‰€æœ‰è¡¨è¾¾å¼è°ƒç”¨ExploreExprTask</li><li>ExploreExprTask
å¯¹æ‰€æœ‰çš„è¡¨è¾¾å¼ï¼Œè°ƒç”¨ApplyRuleTaskï¼Œåœ¨è¡¨è¾¾å¼ä½¿ç”¨ApplyRuleTaskä¹‹å‰ï¼Œä¼šå…ˆä½¿ç”¨ExploreGroupTaskæ‰©å±•è¡¨è¾¾å¼çš„group</li><li>CreatePlanTask
å¯¹åº”çš„æ˜¯implementation ruleï¼Œè½¬æ¢è¡¨è¾¾å¼ä¸ºç‰©ç†è¡¨è¾¾å¼</li></ul><p>å…¶ä¸­ApplyRuleTaskæŸä¸ªè¡¨è¾¾å¼çš„æ—¶å€™ï¼Œä¼šå…ˆé€’å½’çš„ä½¿ç”¨ExploreGroupTaskå¤„ç†è¡¨è¾¾å¼çš„æ‰€æœ‰groupï¼Œæ‰€ä»¥åœ¨transformationæŸä¸ªè§„åˆ™çš„æ—¶å€™ï¼Œæ˜¯æ•´ä½“çš„å¼•ç”¨åˆ°æ•´ä¸ªè¡¨è¾¾å¼ä¸Š</p></div></article><div class=updated-badge-container><span title="Updated @ 2022-05-30 10:32:28 +0800" style=cursor:help><svg xmlns="http://www.w3.org/2000/svg" width="130" height="20" class="updated-badge"><linearGradient id="b" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="a"><rect width="130" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#a)"><path class="updated-badge-left" d="M0 0h55v20H0z"/><path class="updated-badge-right" d="M55 0h75v20H55z"/><path fill="url(#b)" d="M0 0h130v20H0z"/></g><g fill="#fff" text-anchor="middle" font-size="110"><text x="285" y="150" fill="#010101" fill-opacity=".3" textLength="450" transform="scale(.1)">updated</text><text x="285" y="140" textLength="450" transform="scale(.1)">updated</text><text x="915" y="150" fill="#010101" fill-opacity=".3" textLength="650" transform="scale(.1)">2022-05-30</text><text x="915" y="140" textLength="650" transform="scale(.1)">2022-05-30</text></g></svg></span></div><div class=post-gitinfo><div class=post-gitinfo-left><div class="gitinfo-item commit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="icon git-icon"><path d="M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 36.4 24.3 67.1 57.5 76.8-.6 16.1-4.2 28.5-11 36.9-15.4 19.2-49.3 22.4-85.2 25.7-28.2 2.6-57.4 5.4-81.3 16.9v-144c32.5-10.2 56-40.5 56-76.3.0-44.2-35.8-80-80-80S0 35.8.0 80c0 35.8 23.5 66.1 56 76.3v199.3C23.5 365.9.0 396.2.0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-34-21.2-63.1-51.2-74.6 3.1-5.2 7.8-9.8 14.9-13.4 16.2-8.2 40.4-10.4 66.1-12.8 42.2-3.9 90-8.4 118.2-43.4 14-17.4 21.1-39.8 21.6-67.9 31.6-10.8 54.4-40.7 54.4-75.9zM80 64c8.8.0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm0 384c-8.8.0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm224-320c8.8.0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16z"/></svg>c579144</div><div class="gitinfo-item commit-msg"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512" class="icon msg-icon"><path d="M20 424.229h20V279.771H20c-11.046.0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046.0 20 8.954 20 20v212.229h20c11.046.0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046.0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235.0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764.0 96 0z"/></svg>ğŸ›º ğŸŒ¥ others : update theme config</div></div></div><ul class=post-nav><li class=post-nav-prev><a href=/posts/readbooks/leveldb/ rel=prev>&lt; LevelDBæºç é˜…è¯»</a></li><li class=post-nav-next><a href=/posts/readbooks/columbia-optimizer/ rel=next>Columbia Optimizer ></a></li></ul></div></main><div id=back-to-top class=back-to-top><a href=#><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6.0-33.9L207 39c9.4-9.4 24.6-9.4 33.9.0l194.3 194.3c9.4 9.4 9.4 24.6.0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3.0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a></div><footer id=footer class=footer><div class=footer-inner><div class=site-info>2022â€“2022&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3.0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;Wakaka</div></div></footer></div><script>'serviceWorker'in navigator&&window.addEventListener('load',function(){navigator.serviceWorker.register('/sw.js')})</script></body></html>