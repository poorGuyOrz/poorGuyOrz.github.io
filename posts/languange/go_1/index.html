<!doctype html><html lang=zh-cn><head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><meta charset=utf-8><meta name=generator content="Hugo 0.92.1"><meta name=theme-color content="#16171d"><meta name=color-scheme content="light dark"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no, date=no, address=no, email=no"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><title>A Tour of Go速通 | Wakak</title><link rel=stylesheet href=/css/meme.min.1856ddcc2a28b1f6b5ed4deca62655bf630fee9081ff852bb1d25a4134fccf1a.css><script src=/js/meme.min.4c8facfc8134c52bd7bf6bbfa3a7e68b06b47ae04968222e28e7831f5b1a7592.js></script>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&family=Noto+Serif+SC:wght@400;500;700&family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&display=swap" media=print onload="this.media='all'"><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&family=Noto+Serif+SC:wght@400;500;700&family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&display=swap"></noscript><meta name=author content="Wakaka"><meta name=description content="2022-05-17 基础语法 2022-05-24 复合类型，goroutine，channel  基础语法 Packages go使用Packages维护模块，使用import导入模块，import最后一个元素才是需要导入的模块
1 2 3 4  import ( &#34;fmt&#34; &#34;math/rand&#34; )   import 可以单独一个导入一个模块，也可以批量导入， 与之对应的是export，go不显示声明export，首字母大写的变量或方法自动export，外部只能使用导出的变量或者方法，类似c++中类的私有和共有的概念。
Functions 与c++或者Java或者其他语言不同的是，go的函数签名格式为func func_name(parm1 [type], parm2 [type]....) retype {}，先声明名字，再声明变量的类型，参数列表中有多个参数且类型一致的时候，前面的参数类型可以省略，只需要保留之后一个
1 2 3  func add(x, y int) int { return x + y }   且go可以很轻易的实现多返回值的功能，如下"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=mask-icon href=/icons/safari-pinned-tab.svg color=#2a6df4><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="Wakak"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=mobile-web-app-capable content="yes"><meta name=application-name content="Wakak"><meta name=msapplication-starturl content="../../../"><meta name=msapplication-TileColor content="#fff"><meta name=msapplication-TileImage content="../../../icons/mstile-150x150.png"><link rel=manifest href=/manifest.json><link rel=canonical href=https://poorguyorz.github.io/posts/languange/go_1/><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2022-05-17T22:34:11+08:00","dateModified":"2022-05-26T11:27:43+08:00","url":"https://poorguyorz.github.io/posts/languange/go_1/","headline":"A Tour of Go速通","description":"2022-05-17 基础语法 2022-05-24 复合类型，goroutine，channel  基础语法 Packages go使用Packages维护模块，使用import导入模块，import最后一个元素才是需要导入的模块\n1 2 3 4  import ( \"fmt\" \"math/rand\" )   import 可以单独一个导入一个模块，也可以批量导入， 与之对应的是export，go不显示声明export，首字母大写的变量或方法自动export，外部只能使用导出的变量或者方法，类似c++中类的私有和共有的概念。\nFunctions 与c++或者Java或者其他语言不同的是，go的函数签名格式为func func_name(parm1 [type], parm2 [type]....) retype {}，先声明名字，再声明变量的类型，参数列表中有多个参数且类型一致的时候，前面的参数类型可以省略，只需要保留之后一个\n1 2 3  func add(x, y int) int { return x + y }   且go可以很轻易的实现多返回值的功能，如下","inLanguage":"zh-CN","articleSection":"posts","wordCount":1731,"image":"https://poorguyorz.github.io/icons/apple-touch-icon.png","author":{"@type":"Person","description":"Viva La Vida","email":"a_designer@qq.com","image":"https://poorguyorz.github.io/icons/apple-touch-icon.png","url":"https://poorguyorz.github.io/","name":"Wakaka"},"license":"[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)","publisher":{"@type":"Organization","name":"Wakak","logo":{"@type":"ImageObject","url":"https://poorguyorz.github.io/icons/apple-touch-icon.png"},"url":"https://poorguyorz.github.io/"},"mainEntityOfPage":{"@type":"WebSite","@id":"https://poorguyorz.github.io/"}}</script><meta property="og:title" content="A Tour of Go速通"><meta property="og:description" content="2022-05-17 基础语法 2022-05-24 复合类型，goroutine，channel  基础语法 Packages go使用Packages维护模块，使用import导入模块，import最后一个元素才是需要导入的模块
1 2 3 4  import ( &#34;fmt&#34; &#34;math/rand&#34; )   import 可以单独一个导入一个模块，也可以批量导入， 与之对应的是export，go不显示声明export，首字母大写的变量或方法自动export，外部只能使用导出的变量或者方法，类似c++中类的私有和共有的概念。
Functions 与c++或者Java或者其他语言不同的是，go的函数签名格式为func func_name(parm1 [type], parm2 [type]....) retype {}，先声明名字，再声明变量的类型，参数列表中有多个参数且类型一致的时候，前面的参数类型可以省略，只需要保留之后一个
1 2 3  func add(x, y int) int { return x + y }   且go可以很轻易的实现多返回值的功能，如下"><meta property="og:url" content="https://poorguyorz.github.io/posts/languange/go_1/"><meta property="og:site_name" content="Wakak"><meta property="og:locale" content="zh"><meta property="og:image" content="https://poorguyorz.github.io/icons/apple-touch-icon.png"><meta property="og:type" content="article"><meta property="article:published_time" content="2022-05-17T22:34:11+08:00"><meta property="article:modified_time" content="2022-05-26T11:27:43+08:00"><meta property="article:section" content="posts"></head><body><div class=container><header class=header><div class=header-wrapper><div class="header-inner single"><div class=site-brand><a href=/ class=brand>Wakak</a></div><nav class=nav><ul class=menu id=menu><li class="menu-item active"><a href=/posts/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon archive"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7.0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6.0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6.0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3.0 64v48c0 8.8 7.2 16 16 16h480c8.8.0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg><span class=menu-item-name>Posts</span></a></li><li class=menu-item><a href=/tags/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="icon tags"><path d="M497.941 225.941 286.059 14.059A48 48 0 00252.118.0H48C21.49.0.0 21.49.0 48v204.118a48 48 0 0014.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882.0l204.118-204.118c18.745-18.745 18.745-49.137.0-67.882zM112 160c-26.51.0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882.0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397.0h48.721a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882z"/></svg><span class=menu-item-name>Tags</span></a></li><li class=menu-item><a id=theme-switcher href=#><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-light"><path d="M193.2 104.5 242 7a18 18 0 0128 0l48.8 97.5L422.2 70A18 18 0 01442 89.8l-34.5 103.4L505 242a18 18 0 010 28l-97.5 48.8L442 422.2A18 18 0 01422.2 442l-103.4-34.5L270 505a18 18 0 01-28 0l-48.8-97.5L89.8 442A18 18 0 0170 422.2l34.5-103.4-97.5-48.8a18 18 0 010-28l97.5-48.8L70 89.8A18 18 0 0189.8 70zM256 128a128 128 0 10.01.0M256 160a96 96 0 10.01.0"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-dark"><path d="M27 412A256 256 0 10181 5a11.5 11.5.0 00-5 20A201.5 201.5.0 0142 399a11.5 11.5.0 00-15 13"/></svg></a></li></ul></nav></div></div><input type=checkbox id=nav-toggle aria-hidden=true>
<label for=nav-toggle class=nav-toggle></label>
<label for=nav-toggle class=nav-curtain></label></header><main class="main single" id=main><div class=main-inner><article class="content post h-entry" data-align=justify data-type=posts><h1 class="post-title p-name">A Tour of Go速通</h1><div class=post-meta><time datetime=2022-05-17T22:34:11+08:00 class="post-meta-item published dt-published"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6.0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h48c26.5.0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3.0 6-2.7 6-6z"/></svg>&nbsp;2022.5.17</time>
<time datetime=2022-05-26T11:27:43+08:00 class="post-meta-item modified dt-updated"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M4e2 64h-48V12c0-6.627-5.373-12-12-12h-40c-6.627.0-12 5.373-12 12v52H160V12c0-6.627-5.373-12-12-12h-40c-6.627.0-12 5.373-12 12v52H48C21.49 64 0 85.49.0 112v352c0 26.51 21.49 48 48 48h352c26.51.0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 4e2H54a6 6 0 01-6-6V160h352v298a6 6 0 01-6 6zm-52.849-200.65L198.842 404.519c-4.705 4.667-12.303 4.637-16.971-.068l-75.091-75.699c-4.667-4.705-4.637-12.303.068-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l44.104 44.461 111.072-110.181c4.705-4.667 12.303-4.637 16.971.068l22.536 22.718c4.667 4.705 4.636 12.303-.069 16.97z"/></svg>&nbsp;2022.5.26</time>
<span class="post-meta-item wordcount"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3.0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9.0l60.1 60.1c18.8 18.7 18.8 49.1.0 67.9zM284.2 99.8 21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3.0-17l-111-111c-4.8-4.7-12.4-4.7-17.1.0zM124.1 339.9c-5.5-5.5-5.5-14.3.0-19.8l154-154c5.5-5.5 14.3-5.5 19.8.0s5.5 14.3.0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8.0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&nbsp;1731</span>
<span class="post-meta-item reading-time"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5.0-2e2-89.5-2e2-2e2S145.5 56 256 56s2e2 89.5 2e2 2e2-89.5 2e2-2e2 2e2zm61.8-104.4-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6.0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;9&nbsp;分钟</span></div><div class="post-body e-content"><ul><li>2022-05-17 基础语法</li><li>2022-05-24 复合类型，goroutine，channel</li></ul><h2 id=基础语法>基础语法</h2><h3 id=packages>Packages</h3><p style=text-indent:0><span class=drop-cap>g</span>o使用Packages维护模块，使用import导入模块，import最后一个元素才是需要导入的模块</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kn>import</span> <span class=p>(</span>
	<span class=s>&#34;fmt&#34;</span>
	<span class=s>&#34;math/rand&#34;</span>
<span class=p>)</span>
</code></pre></td></tr></table></div></div></div><p>import 可以单独一个导入一个模块，也可以批量导入，
与之对应的是export，go不显示声明export，首字母大写的变量或方法自动export，外部只能使用导出的变量或者方法，类似c++中类的私有和共有的概念。</p><h3 id=functions>Functions</h3><p>与c++或者Java或者其他语言不同的是，go的函数签名格式为<code>func func_name(parm1 [type], parm2 [type]....) retype {}</code>，先声明名字，再声明变量的类型，参数列表中有多个参数且类型一致的时候，前面的参数类型可以省略，只需要保留之后一个</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>add</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=p>{</span>
	<span class=k>return</span> <span class=nx>x</span> <span class=o>+</span> <span class=nx>y</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><p>且go可以很轻易的实现多返回值的功能，如下</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>swap</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span> <span class=kt>string</span><span class=p>)</span> <span class=p>(</span><span class=kt>string</span><span class=p>,</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
	<span class=k>return</span> <span class=nx>y</span><span class=p>,</span> <span class=nx>x</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>a</span><span class=p>,</span> <span class=nx>b</span> <span class=o>:=</span> <span class=nf>swap</span><span class=p>(</span><span class=s>&#34;hello&#34;</span><span class=p>,</span> <span class=s>&#34;world&#34;</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><p>上面的功能在c++中需要使用结构体或者tuple或者Paris才能实现。</p><p>go的return还可以使用不带参数的 &ldquo;naked&rdquo; return，此时要求函数签名中的return参数必须有名字，且在函数体中必须为参数赋值，此时使用return直接返回，参数可以直接传递到外部，但是需要注意的时候，如果函数体过于庞大且有多个出口，不建议使用，难于阅读</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>split</span><span class=p>(</span><span class=nx>sum</span> <span class=kt>int</span><span class=p>)</span> <span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span> <span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
	<span class=nx>x</span> <span class=p>=</span> <span class=nx>sum</span> <span class=o>*</span> <span class=mi>4</span> <span class=o>/</span> <span class=mi>9</span>
	<span class=nx>y</span> <span class=p>=</span> <span class=nx>sum</span> <span class=o>-</span> <span class=nx>x</span>
	<span class=k>return</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h3 id=变量>变量</h3><p>使用var声明变量，声明多个变量的时候可以类似参数列表中的参数，前面参数不需要声明类型。初始化的时候按顺序初始化，且初始化的参数个数必须前后一致</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>var</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>j</span><span class=p>,</span> <span class=nx>k</span> <span class=kt>int</span> <span class=p>=</span> <span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>0</span> <span class=c1>// true
</span><span class=c1></span><span class=kd>var</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>j</span><span class=p>,</span> <span class=nx>k</span> <span class=kt>int</span> <span class=p>=</span> <span class=mi>1</span><span class=p>,</span><span class=mi>2</span>   <span class=c1>// false
</span></code></pre></td></tr></table></div></div></div><p>初始化的时候还可以省略类型，程序会进行参数推导。
函数内部还可以使用 <code>:=</code>替换var声明变量，此时必须初始化，但是在函数体外部，由于go规定，每条语句必须由特定的关键字开头，所以外部不可使用此语法。</p><p>go有以下基础类型，除了额外的complex类型之外其他的和c++类似，零值也和c++类似，complex的零值为<code>(0+0i)</code></p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kt>bool</span>

<span class=kt>string</span>

<span class=kt>int</span>  <span class=kt>int8</span>  <span class=kt>int16</span>  <span class=kt>int32</span>  <span class=kt>int64</span>
<span class=kt>uint</span> <span class=kt>uint8</span> <span class=kt>uint16</span> <span class=kt>uint32</span> <span class=kt>uint64</span> <span class=kt>uintptr</span>

<span class=kt>byte</span> <span class=c1>// alias for uint8
</span><span class=c1></span>
<span class=kt>rune</span> <span class=c1>// alias for int32
</span><span class=c1></span>     <span class=c1>// represents a Unicode code point
</span><span class=c1></span>
<span class=kt>float32</span> <span class=kt>float64</span>

<span class=kt>complex64</span> <span class=kt>complex128</span>
</code></pre></td></tr></table></div></div></div><p>go可以使用c的语法进行类型转换，但是c允许隐式转换，而go必须声明转换的类型，否则语法错误
go中使用nil作为null</p><h3 id=常量>常量</h3><p>直接使用<code>const xx = y</code>的语法声明，不允许使用<code>:=</code>，因为他隐含有变量声明的意思，</p><h2 id=语句>语句</h2><h3 id=for>for</h3><p>go只有for一种循环结构，与c++相比，go的()是省略掉的，{}是必须的，其中init statement和post statement是可以省略的， condition expression不可省略，这和c++一样，且在init statement和post statement省略的时候，;也可以省略，此时for循环类似c++中的while循环</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=c1>// the init statement: executed before the first iteration    可省略
</span><span class=c1>// the condition expression: evaluated before every iteration 不可省略
</span><span class=c1>// the post statement: executed at the end of every iteration 可省略
</span><span class=c1></span>	<span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
		<span class=nx>sum</span> <span class=o>+=</span> <span class=nx>i</span>
	<span class=p>}</span>

  <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span>
	<span class=k>for</span> <span class=p>;</span><span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=p>{</span>
		<span class=nx>sum</span> <span class=o>+=</span> <span class=nx>i</span>
		<span class=nx>i</span><span class=o>++</span>
	<span class=p>}</span>

  <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span>
	<span class=k>for</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>10</span> <span class=p>{</span>
		<span class=nx>sum</span> <span class=o>+=</span> <span class=nx>i</span>
		<span class=nx>i</span><span class=o>++</span>
	<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><p>如果条件语句去掉，则此时是个死循环，下面的代码表现是一样的</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go>
<span class=k>for</span> <span class=kc>true</span> <span class=p>{</span>
<span class=p>}</span>

<span class=k>for</span> <span class=p>{</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h3 id=if>if</h3><p>类似for，表达是的括号是可省略的，{}是必须的，前面的for的()其实也是可选的，但是必须是只有条件表达式的时候，<em>所以猜测是否是只有一个语句表达式的时候才可以使用括号</em>，if在条件语句之前也可以使用init语句，此时初始化的参数只能在if范围内使用</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>pow</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>n</span><span class=p>,</span> <span class=nx>lim</span> <span class=kt>float64</span><span class=p>)</span> <span class=kt>float64</span> <span class=p>{</span>
	<span class=k>if</span> <span class=nx>v</span> <span class=o>:=</span> <span class=nx>math</span><span class=p>.</span><span class=nf>Pow</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>n</span><span class=p>);</span> <span class=nx>v</span> <span class=p>&lt;</span> <span class=nx>lim</span> <span class=p>{</span>
		<span class=k>return</span> <span class=nx>v</span>
	<span class=p>}</span>
	<span class=k>return</span> <span class=nx>lim</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h3 id=switch>Switch</h3><p>和前面类似，表达是的括号是可省略的，{}是必须的，Switch后面包含init 语句和需要匹配的表达式，init语句可以在外部实现，case语句和其他语言的实现不一样，没有默认fallthroh，他的每一个case不需要写break，默认行为就是break的，的且case的表达式要求是constant，不要求是整形</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;Go runs on &#34;</span><span class=p>)</span>
	<span class=k>switch</span> <span class=nx>os</span> <span class=o>:=</span> <span class=nx>runtime</span><span class=p>.</span><span class=nx>GOOS</span><span class=p>;</span> <span class=nx>os</span> <span class=p>{</span>
	<span class=k>case</span> <span class=s>&#34;darwin&#34;</span><span class=p>:</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;OS X.&#34;</span><span class=p>)</span>
	<span class=k>case</span> <span class=s>&#34;linux&#34;</span><span class=p>:</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Linux.&#34;</span><span class=p>)</span>
	<span class=k>default</span><span class=p>:</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s.\n&#34;</span><span class=p>,</span> <span class=nx>os</span><span class=p>)</span>
	<span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><p>还可以是一个表达式，case匹配表达式成功的分支</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go>	<span class=nx>today</span> <span class=o>:=</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>().</span><span class=nf>Weekday</span><span class=p>()</span>
	<span class=k>switch</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Saturday</span> <span class=p>{</span>
	<span class=k>case</span> <span class=nx>today</span> <span class=o>+</span> <span class=mi>0</span><span class=p>:</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Today.&#34;</span><span class=p>)</span>
	<span class=k>case</span> <span class=nx>today</span> <span class=o>+</span> <span class=mi>1</span><span class=p>:</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Tomorrow.&#34;</span><span class=p>)</span>
	<span class=k>case</span> <span class=nx>today</span> <span class=o>+</span> <span class=mi>2</span><span class=p>:</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;In two days.&#34;</span><span class=p>)</span>
	<span class=k>default</span><span class=p>:</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Too far away.&#34;</span><span class=p>)</span>
	<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><p>Switch是一个等值匹配过程，所以Switch后面的语句是case计算的结果，如果此时Switch之后的结果是true，则可以省略，此时就是一堆case在判断是否为true，相当于大量的连体if-else</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go>	<span class=nx>t</span> <span class=o>:=</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>()</span>
	<span class=k>switch</span> <span class=p>{</span>
	<span class=k>case</span> <span class=nx>t</span><span class=p>.</span><span class=nf>Hour</span><span class=p>()</span> <span class=p>&lt;</span> <span class=mi>12</span><span class=p>:</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Good morning!&#34;</span><span class=p>)</span>
	<span class=k>case</span> <span class=nx>t</span><span class=p>.</span><span class=nf>Hour</span><span class=p>()</span> <span class=p>&lt;</span> <span class=mi>17</span><span class=p>:</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Good afternoon.&#34;</span><span class=p>)</span>
	<span class=k>default</span><span class=p>:</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Good evening.&#34;</span><span class=p>)</span>
	<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h3 id=defer>defer</h3><p>把defer修饰的语言延迟到函数返回之后才返回，所有的defer修饰的语句使用栈维护，最后调用的defer语句最先执行</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;counting&#34;</span><span class=p>)</span>

	<span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
		<span class=k>defer</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>
	<span class=p>}</span>

	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;done&#34;</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h2 id=指针复合类型>指针，复合类型</h2><h3 id=指针>指针</h3><p>和C/C++的指针类似，使用*声明指针，使用&取地址。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go>  <span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=o>:=</span> <span class=mi>42</span><span class=p>,</span> <span class=mi>2701</span>

	<span class=nx>p</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>i</span>         <span class=c1>// point to i
</span><span class=c1></span>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=o>*</span><span class=nx>p</span><span class=p>)</span> <span class=c1>// read i through the pointer
</span><span class=c1></span>	<span class=o>*</span><span class=nx>p</span> <span class=p>=</span> <span class=mi>21</span>         <span class=c1>// set i through the pointer
</span><span class=c1></span>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>  <span class=c1>// see the new value of i
</span></code></pre></td></tr></table></div></div></div><h3 id=structs>Structs</h3><p>结构体，和C/C++类似，可以使用.访问变量，结构体是自定义复合类型，参数传递的时候需要区分值传递和引用传递，所以建议结构体使用指针操作，结构体使用指针的时候指针的*可以省略，可以直接使用<code>pointer.filed</code>的语法，一个语法糖</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>Vertex</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>X</span> <span class=kt>int</span>
	<span class=nx>Y</span> <span class=kt>int</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>v</span> <span class=o>:=</span> <span class=nx>Vertex</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>}</span>
	<span class=nx>p</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>v</span>
	<span class=nx>p</span><span class=p>.</span><span class=nx>X</span> <span class=p>=</span> <span class=mf>1e9</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>v</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><p>结构体初始化的时候，可以按照结构体字段声明的顺序初始化，也可以使用字段名指定初始化，此时其他没有初始化的字段为零值。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=nx>v2</span> <span class=p>=</span> <span class=nx>Vertex</span><span class=p>{</span><span class=nx>Y</span><span class=p>:</span> <span class=mi>1</span><span class=p>}</span>  <span class=c1>// Y:0 is implicit
</span></code></pre></td></tr></table></div></div></div><p>另外，go里面初始化变量的时候语法是 <code>x := 1</code>，初始化基础类型的时候类型可以省略，会进行类型推导，但是对于非基础类型，需要显示声明类型，所以可以使用下面的语法</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go>	<span class=nx>s</span> <span class=o>:=</span> <span class=kd>struct</span> <span class=p>{</span>
		<span class=nx>i</span> <span class=kt>int</span>
		<span class=nx>b</span> <span class=kt>bool</span>
	<span class=p>}{</span><span class=mi>2</span><span class=p>,</span> <span class=kc>true</span><span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h3 id=arrays>Arrays</h3><p>类似C/C++中的普通数组，初始化之后无法直接改变大小，c++提供vector来扩展数组的功能，而go使用新类型slice与数组结合使用</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=nx>primes</span> <span class=o>:=</span> <span class=p>[</span><span class=mi>6</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>13</span><span class=p>}</span>
</code></pre></td></tr></table></div></div></div><p>和结构体一起使用，可以使用下面的语法</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go>	<span class=nx>s</span> <span class=o>:=</span> <span class=p>[]</span><span class=kd>struct</span> <span class=p>{</span>
		<span class=nx>i</span> <span class=kt>int</span>
		<span class=nx>b</span> <span class=kt>bool</span>
	<span class=p>}{</span>
		<span class=p>{</span><span class=mi>2</span><span class=p>,</span> <span class=kc>true</span><span class=p>},</span>
		<span class=p>{</span><span class=mi>3</span><span class=p>,</span> <span class=kc>false</span><span class=p>},</span>
		<span class=p>{</span><span class=mi>5</span><span class=p>,</span> <span class=kc>true</span><span class=p>},</span>
		<span class=p>{</span><span class=mi>7</span><span class=p>,</span> <span class=kc>true</span><span class=p>},</span>
		<span class=p>{</span><span class=mi>11</span><span class=p>,</span> <span class=kc>false</span><span class=p>},</span>
		<span class=p>{</span><span class=mi>13</span><span class=p>,</span> <span class=kc>true</span><span class=p>},</span>
	<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h3 id=slice>slice</h3><p>切片类型，可以理解为数组的窗口操作，在数组上使用语法<code>arr[low : high]</code>可以构造一个数组上<code>[low : high)</code>的片段，内部数据还是在原来的地址上，切片的数据的变动就是直接在更改元数据，在数组的所有的切片或者数组本身的数据变动，都会印象到其他对象，类似C++的string_view，使用的时候需要注意。范围需要是在arr的合理范围，不允许越界，不允许使用负数，两个元素，可以省略其中一个或者两个都省略，此时省略的元素就是0或者是arr.size()</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>names</span> <span class=o>:=</span> <span class=p>[</span><span class=mi>4</span><span class=p>]</span><span class=kt>string</span><span class=p>{</span>
		<span class=s>&#34;John&#34;</span><span class=p>,</span>
		<span class=s>&#34;Paul&#34;</span><span class=p>,</span>
		<span class=s>&#34;George&#34;</span><span class=p>,</span>
		<span class=s>&#34;Ringo&#34;</span><span class=p>,</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>names</span><span class=p>)</span>

	<span class=nx>a</span> <span class=o>:=</span> <span class=nx>names</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>2</span><span class=p>]</span>
	<span class=nx>b</span> <span class=o>:=</span> <span class=nx>names</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>]</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>)</span>

	<span class=nx>b</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=p>=</span> <span class=s>&#34;XXX&#34;</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>names</span><span class=p>)</span>
<span class=p>}</span>

<span class=o>-----------</span>
<span class=p>[</span><span class=nx>John</span> <span class=nx>Paul</span> <span class=nx>George</span> <span class=nx>Ringo</span><span class=p>]</span>
<span class=p>[</span><span class=nx>John</span> <span class=nx>Paul</span><span class=p>]</span> <span class=p>[</span><span class=nx>Paul</span> <span class=nx>George</span><span class=p>]</span>
<span class=p>[</span><span class=nx>John</span> <span class=nx>XXX</span><span class=p>]</span> <span class=p>[</span><span class=nx>XXX</span> <span class=nx>George</span><span class=p>]</span>
<span class=p>[</span><span class=nx>John</span> <span class=nx>XXX</span> <span class=nx>George</span> <span class=nx>Ringo</span><span class=p>]</span>
</code></pre></td></tr></table></div></div></div><p>切片还可以使用切片初始化。切片可以使用类似数组的方式声明， 没有声明长度的时候是切片类型，下面是几个切片初始化的例子</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>var</span> <span class=nx>a</span> <span class=p>[</span><span class=mi>10</span><span class=p>]</span><span class=kt>int</span>
<span class=nx>a</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>10</span><span class=p>]</span>
<span class=nx>a</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span>
<span class=nx>a</span><span class=p>[</span><span class=mi>0</span><span class=p>:]</span>
<span class=nx>a</span><span class=p>[:]</span>
</code></pre></td></tr></table></div></div></div><p>切片可以使用<code>len</code>和<code>cap</code>查看大小和容量，len是当前切片的元素数量，cap是切片当前start到数组end的大小，切片调整的时候，只能在当前切片start的位置到cap之间调整，无法直接调整到切片之前的位置</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=c1>// len=6 cap=6 [2 3 5 7 11 13]
</span><span class=c1></span><span class=nx>s</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>13</span><span class=p>}</span>
<span class=c1>// len=0 cap=6 []
</span><span class=c1></span><span class=nx>s</span> <span class=p>=</span> <span class=nx>s</span><span class=p>[:</span><span class=mi>0</span><span class=p>]</span>
<span class=c1>// len=4 cap=6 [2 3 5 7]
</span><span class=c1></span><span class=nx>s</span> <span class=p>=</span> <span class=nx>s</span><span class=p>[:</span><span class=mi>4</span><span class=p>]</span>
<span class=c1>// len=2 cap=4 [5 7]
</span><span class=c1></span><span class=nx>s</span> <span class=p>=</span> <span class=nx>s</span><span class=p>[</span><span class=mi>2</span><span class=p>:]</span>
<span class=c1>// len=4 cap=4 [5 7 11 13]
</span><span class=c1></span><span class=nx>s</span> <span class=p>=</span> <span class=nx>s</span><span class=p>[:</span><span class=mi>4</span><span class=p>]</span>
<span class=c1>// error
</span><span class=c1></span><span class=nx>s</span> <span class=p>=</span> <span class=nx>s</span><span class=p>[:</span><span class=mi>5</span><span class=p>]</span>
</code></pre></td></tr></table></div></div></div><ul><li>可以使用make构造切片，第二个参数为切片的len，第三个参数为切片的cap，cap默认为len</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=nx>a</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>  <span class=c1>// len(a)=5
</span><span class=c1></span><span class=nx>b</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span> <span class=c1>// len(b)=0, cap(b)=5
</span></code></pre></td></tr></table></div></div></div><ul><li>切片可以包含任何类型，例如切片的切片</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go>	<span class=nx>board</span> <span class=o>:=</span> <span class=p>[][]</span><span class=kt>string</span><span class=p>{</span>
		<span class=p>[]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;_&#34;</span><span class=p>,</span> <span class=s>&#34;_&#34;</span><span class=p>,</span> <span class=s>&#34;_&#34;</span><span class=p>},</span>
		<span class=p>[]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;_&#34;</span><span class=p>,</span> <span class=s>&#34;_&#34;</span><span class=p>,</span> <span class=s>&#34;_&#34;</span><span class=p>},</span>
		<span class=p>[]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;_&#34;</span><span class=p>,</span> <span class=s>&#34;_&#34;</span><span class=p>,</span> <span class=s>&#34;_&#34;</span><span class=p>},</span>
	<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><p>可以使用append动态扩展切片，类似vector，但是在go中，简单的实验之后，没有发现扩容之后内存地址发生变化，尚且不清楚内存超出容量之后是否重新分配空间了</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go>	<span class=nx>s</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>s</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
	<span class=nf>printSlice</span><span class=p>(</span><span class=nx>s</span><span class=p>)</span>
	<span class=nx>p3</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>s</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%p\n&#34;</span><span class=p>,</span> <span class=nx>p3</span><span class=p>)</span>

	<span class=c1>// We can add more than one element at a time.
</span><span class=c1></span>	<span class=nx>s</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>s</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>
	<span class=nf>printSlice</span><span class=p>(</span><span class=nx>s</span><span class=p>)</span>
	<span class=nx>p4</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>s</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%p\n&#34;</span><span class=p>,</span> <span class=nx>p4</span><span class=p>)</span>
<span class=o>------</span>
<span class=nx>len</span><span class=p>=</span><span class=mi>2</span> <span class=nx>cap</span><span class=p>=</span><span class=mi>2</span> <span class=p>[</span><span class=mi>0</span> <span class=mi>1</span><span class=p>]</span>
<span class=mh>0xc0000b4018</span>
<span class=nx>len</span><span class=p>=</span><span class=mi>5</span> <span class=nx>cap</span><span class=p>=</span><span class=mi>6</span> <span class=p>[</span><span class=mi>0</span> <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span> <span class=mi>4</span><span class=p>]</span>
<span class=mh>0xc0000b4018</span>
</code></pre></td></tr></table></div></div></div><blockquote><p>TIPS: go中，优先使用切片类型</p></blockquote><h3 id=exercise-slices>Exercise: Slices</h3><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>Pic</span><span class=p>(</span><span class=nx>dx</span><span class=p>,</span> <span class=nx>dy</span> <span class=kt>int</span><span class=p>)</span> <span class=p>[][]</span><span class=kt>uint8</span> <span class=p>{</span>
	<span class=nx>s</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([][]</span><span class=kt>uint8</span><span class=p>,</span> <span class=nx>dy</span><span class=p>)</span>
	<span class=k>for</span> <span class=nx>x</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>s</span> <span class=p>{</span>
		<span class=nx>s</span><span class=p>[</span><span class=nx>x</span><span class=p>]</span> <span class=p>=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>uint8</span><span class=p>,</span> <span class=nx>dx</span><span class=p>)</span>
		<span class=k>for</span> <span class=nx>y</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>s</span><span class=p>[</span><span class=nx>x</span><span class=p>]</span> <span class=p>{</span>
			<span class=nx>s</span><span class=p>[</span><span class=nx>x</span><span class=p>][</span><span class=nx>y</span><span class=p>]</span> <span class=p>=</span> <span class=nb>uint8</span><span class=p>((</span><span class=nx>x</span><span class=p>^</span><span class=nx>y</span><span class=p>))</span>
		<span class=p>}</span>
	<span class=p>}</span>
	<span class=k>return</span> <span class=nx>s</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>pic</span><span class=p>.</span><span class=nf>Show</span><span class=p>(</span><span class=nx>Pic</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h3 id=range>range</h3><p>对于切片，在for循环中使用range可以获得切片的下标和对应的值，可以使用<code>_</code>省略不想使用的参数，或者直接使用一个参数接收index</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>pow</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>
	<span class=k>for</span> <span class=nx>value</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>pow</span> <span class=p>{</span>
		<span class=nx>pow</span><span class=p>[</span><span class=nx>value</span><span class=p>]</span> <span class=p>=</span> <span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=nb>uint</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=c1>// == 2**i
</span><span class=c1></span>	<span class=p>}</span>
	<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>value</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>pow</span> <span class=p>{</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%d\n&#34;</span><span class=p>,</span> <span class=nx>value</span><span class=p>)</span>
	<span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h3 id=map>map</h3><p>键值对，语法为<code>map[ktype]vtype</code>，使用make构建，和C++的map使用类似，可以使用<code>[]</code>来访问或者设置一个值，其中可以使用语法<code>ele, ok = map[key]</code>来测试key是否存在，存在则ok为true，其ele获得值，否则ele为零值且ok为false。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>m</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span><span class=p>)</span>

	<span class=nx>m</span><span class=p>[</span><span class=s>&#34;Answer&#34;</span><span class=p>]</span> <span class=p>=</span> <span class=mi>42</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;The value:&#34;</span><span class=p>,</span> <span class=nx>m</span><span class=p>[</span><span class=s>&#34;Answer&#34;</span><span class=p>])</span>

	<span class=nx>m</span><span class=p>[</span><span class=s>&#34;Answer&#34;</span><span class=p>]</span> <span class=p>=</span> <span class=mi>48</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;The value:&#34;</span><span class=p>,</span> <span class=nx>m</span><span class=p>[</span><span class=s>&#34;Answer&#34;</span><span class=p>])</span>

	<span class=nb>delete</span><span class=p>(</span><span class=nx>m</span><span class=p>,</span> <span class=s>&#34;Answer&#34;</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;The value:&#34;</span><span class=p>,</span> <span class=nx>m</span><span class=p>[</span><span class=s>&#34;Answer&#34;</span><span class=p>])</span>

	<span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>m</span><span class=p>[</span><span class=s>&#34;Answer&#34;</span><span class=p>]</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;The value:&#34;</span><span class=p>,</span> <span class=nx>v</span><span class=p>,</span> <span class=s>&#34;Present?&#34;</span><span class=p>,</span> <span class=nx>ok</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h3 id=func-as-value>func as value</h3><p>类似函数指针，函数可以使用函数作为参数，但是C++中可以使用指针或者function表达式作为参数声明，go中则需要使完整的参数签名。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>compute</span><span class=p>(</span><span class=nx>fn</span> <span class=kd>func</span><span class=p>(</span><span class=kt>float64</span><span class=p>,</span> <span class=kt>float64</span><span class=p>)</span> <span class=kt>float64</span><span class=p>)</span> <span class=kt>float64</span> <span class=p>{</span>
	<span class=k>return</span> <span class=nf>fn</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>
<span class=p>}</span>

	<span class=nx>hypot</span> <span class=o>:=</span> <span class=kd>func</span><span class=p>(</span><span class=nx>x</span><span class=p>,</span> <span class=nx>y</span> <span class=kt>float64</span><span class=p>)</span> <span class=kt>float64</span> <span class=p>{</span>
		<span class=k>return</span> <span class=nx>math</span><span class=p>.</span><span class=nf>Sqrt</span><span class=p>(</span><span class=nx>x</span><span class=o>*</span><span class=nx>x</span> <span class=o>+</span> <span class=nx>y</span><span class=o>*</span><span class=nx>y</span><span class=p>)</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>hypot</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>12</span><span class=p>))</span>

	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>compute</span><span class=p>(</span><span class=nx>hypot</span><span class=p>))</span>

</code></pre></td></tr></table></div></div></div><p>函数还可以使用闭包的特性，下面的例子中，adder的返回值是一个函数，他捕获了adder中的sum变量。之后对于每一个adder势力，他内部的sum都是独立存在的，且会被之前的调用影响到，直观的理解就是他实现了一个简单的类，打包了类属性和方法。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>adder</span><span class=p>()</span> <span class=kd>func</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=p>{</span>
	<span class=nx>sum</span> <span class=o>:=</span> <span class=mi>0</span>
	<span class=k>return</span> <span class=kd>func</span><span class=p>(</span><span class=nx>x</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=p>{</span>
		<span class=nx>sum</span> <span class=o>+=</span> <span class=nx>x</span>
		<span class=k>return</span> <span class=nx>sum</span>
	<span class=p>}</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>pos</span><span class=p>,</span> <span class=nx>neg</span> <span class=o>:=</span> <span class=nf>adder</span><span class=p>(),</span> <span class=nf>adder</span><span class=p>()</span>
	<span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span>
			<span class=nf>pos</span><span class=p>(</span><span class=nx>i</span><span class=p>),</span>
			<span class=nf>neg</span><span class=p>(</span><span class=o>-</span><span class=mi>2</span><span class=o>*</span><span class=nx>i</span><span class=p>),</span>
		<span class=p>)</span>
	<span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><p>Exercise: Fibonacci closure</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>fibonacci</span><span class=p>()</span> <span class=kd>func</span><span class=p>()</span> <span class=kt>int</span> <span class=p>{</span>
	<span class=nx>x</span><span class=p>,</span> <span class=nx>y</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span>
	<span class=k>return</span> <span class=kd>func</span><span class=p>()</span> <span class=kt>int</span> <span class=p>{</span>
		<span class=nx>ret</span> <span class=o>:=</span> <span class=nx>x</span>
		<span class=nx>x</span><span class=p>,</span> <span class=nx>y</span> <span class=p>=</span> <span class=nx>y</span><span class=p>,</span> <span class=p>(</span><span class=nx>x</span> <span class=o>+</span> <span class=nx>y</span><span class=p>)</span>
		<span class=k>return</span> <span class=nx>ret</span>
	<span class=p>}</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>f</span> <span class=o>:=</span> <span class=nf>fibonacci</span><span class=p>()</span>
	<span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>f</span><span class=p>())</span>
	<span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h2 id=至此就是go的基础语法与结构有其他语言基础几乎一遍过接下来是比较高级点的知识可能需要更多的思考>至此就是go的基础语法与结构，有其他语言基础几乎一遍过，接下来是比较高级点的知识，可能需要更多的思考</h2><h2 id=high-level>high level</h2><h3 id=方法>方法</h3><p>go没有类，不像C++可以定义自己的基础类型，但是可以使用其他机制实现类似C++的对象调用方法的实现，在函数名称之前声明receiver，调用的时候使用receiver 类型调用函数，<br>语法为<code>func (v receivertype) func_name(args ...) ret.. {}</code>，具体例子为</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>Vertex</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>X</span><span class=p>,</span> <span class=nx>Y</span> <span class=kt>float64</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=p>(</span><span class=nx>v</span> <span class=nx>Vertex</span><span class=p>)</span> <span class=nf>Abs</span><span class=p>()</span> <span class=kt>float64</span> <span class=p>{</span>
	<span class=k>return</span> <span class=nx>math</span><span class=p>.</span><span class=nf>Sqrt</span><span class=p>(</span><span class=nx>v</span><span class=p>.</span><span class=nx>X</span><span class=o>*</span><span class=nx>v</span><span class=p>.</span><span class=nx>X</span> <span class=o>+</span> <span class=nx>v</span><span class=p>.</span><span class=nx>Y</span><span class=o>*</span><span class=nx>v</span><span class=p>.</span><span class=nx>Y</span><span class=p>)</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>v</span> <span class=o>:=</span> <span class=nx>Vertex</span><span class=p>{</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>v</span><span class=p>.</span><span class=nf>Abs</span><span class=p>())</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><p>可以看见，语法和C++的类调用方法一样，虽然实现不一样，C++实现类方法的底层原理是方法的第一个隐藏的参数是this指针，调用的时候使用obj.func的语法调用，但是实际上的调用是<code>func(obj...)</code>，只是为了体现OOP的思想，语法按照现在的实现机制实现，其实都差不多。go的是实现是把类型和方法分离，最终实现的效果是一样的，。</p><p>此外，go的receiver是通过拷贝的方式调用的，所以函数内的操作无法直接影响到receiver，但是可以把receiver声明为指针，此时就是在使用指针调用函数了，可以实现和C++常规调用一样的效果，其由于GO的指针和值的调用一样，所以几乎在代码上没有差别</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>Vertex</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>X</span><span class=p>,</span> <span class=nx>Y</span> <span class=kt>float64</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=p>(</span><span class=nx>v</span> <span class=o>*</span><span class=nx>Vertex</span><span class=p>)</span> <span class=nf>Abs</span><span class=p>()</span> <span class=kt>float64</span> <span class=p>{</span>
	<span class=k>return</span> <span class=nx>math</span><span class=p>.</span><span class=nf>Sqrt</span><span class=p>(</span><span class=nx>v</span><span class=p>.</span><span class=nx>X</span><span class=o>*</span><span class=nx>v</span><span class=p>.</span><span class=nx>X</span> <span class=o>+</span> <span class=nx>v</span><span class=p>.</span><span class=nx>Y</span><span class=o>*</span><span class=nx>v</span><span class=p>.</span><span class=nx>Y</span><span class=p>)</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=p>(</span><span class=nx>v</span> <span class=o>*</span><span class=nx>Vertex</span><span class=p>)</span> <span class=nf>Scale</span><span class=p>(</span><span class=nx>f</span> <span class=kt>float64</span><span class=p>)</span> <span class=p>{</span>
	<span class=nx>v</span><span class=p>.</span><span class=nx>X</span> <span class=p>=</span> <span class=nx>v</span><span class=p>.</span><span class=nx>X</span> <span class=o>*</span> <span class=nx>f</span>
	<span class=nx>v</span><span class=p>.</span><span class=nx>Y</span> <span class=p>=</span> <span class=nx>v</span><span class=p>.</span><span class=nx>Y</span> <span class=o>*</span> <span class=nx>f</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>v</span> <span class=o>:=</span> <span class=nx>Vertex</span><span class=p>{</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>}</span>
	<span class=nx>v</span><span class=p>.</span><span class=nf>Scale</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>v</span><span class=p>.</span><span class=nf>Abs</span><span class=p>())</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><p>但是当函数中的参数使用指针的时候，直接调用的时候必须使用指针类型， 此时编译器没有做直接替换，receiver调用的时候，是会自动转换的，</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>var</span> <span class=nx>v</span> <span class=nx>Vertex</span>
<span class=nf>ScaleFunc</span><span class=p>(</span><span class=nx>v</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>  <span class=c1>// Compile error!
</span><span class=c1></span><span class=nf>ScaleFunc</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>v</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span> <span class=c1>// OK
</span><span class=c1></span>
<span class=o>------</span>
<span class=kd>var</span> <span class=nx>v</span> <span class=nx>Vertex</span>
<span class=nx>v</span><span class=p>.</span><span class=nf>Scale</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>  <span class=c1>// OK
</span><span class=c1></span><span class=nx>p</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>v</span>
<span class=nx>p</span><span class=p>.</span><span class=nf>Scale</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span> <span class=c1>// OK
</span></code></pre></td></tr></table></div></div></div><blockquote><p>简而言之，使用receiver的时候，函数无论声明receiver为指针或者值，都可以自由调用，具体行为有receiver的声明方式决定，但是作为参数的时候，声明为指针，则必须使用指针参数</p></blockquote><h3 id=interfaces>Interfaces</h3><p>接口，一组抽线方法的声明，所有实现对应的方法的类型都视为实现了接口，此时可以把相应的具体的对象赋值给接口对象</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>Abser</span> <span class=kd>interface</span> <span class=p>{</span>
	<span class=nf>Abs</span><span class=p>()</span> <span class=kt>float64</span>
<span class=p>}</span>

<span class=kd>type</span> <span class=nx>Vertex</span> <span class=kd>struct</span> <span class=p>{</span>
	<span class=nx>X</span><span class=p>,</span> <span class=nx>Y</span> <span class=kt>float64</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=p>(</span><span class=nx>v</span> <span class=o>*</span><span class=nx>Vertex</span><span class=p>)</span> <span class=nf>Abs</span><span class=p>()</span> <span class=kt>float64</span> <span class=p>{</span>
	<span class=k>return</span> <span class=nx>math</span><span class=p>.</span><span class=nf>Sqrt</span><span class=p>(</span><span class=nx>v</span><span class=p>.</span><span class=nx>X</span><span class=o>*</span><span class=nx>v</span><span class=p>.</span><span class=nx>X</span> <span class=o>+</span> <span class=nx>v</span><span class=p>.</span><span class=nx>Y</span><span class=o>*</span><span class=nx>v</span><span class=p>.</span><span class=nx>Y</span><span class=p>)</span>
<span class=p>}</span>

<span class=kd>var</span> <span class=nx>a</span> <span class=nx>Abser</span>
<span class=nx>v</span> <span class=o>:=</span> <span class=nx>Vertex</span><span class=p>{</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>}</span>
<span class=nx>a</span> <span class=p>=</span> <span class=o>&amp;</span><span class=nx>v</span>
</code></pre></td></tr></table></div></div></div><p>接口具有具体的值和和类型，虽然在调用的时候是直接使用接口调用具体方法。但是应该和C++的多态类似，可以在运行时使用某信息进行函数调用，接口可以使用<code>%v</code>和<code>%T</code>打印值和类型</p><p>当实现接口的类型的receiver是指针类型且是nil，则此时还是可以继续正常调用函数，只是必须自己处理nil。类似C++中，null对象也可以正常调用类的非静态方法，只要没有使用到类的其他成员变量或者成员函数，就可以正常运行</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>T</span><span class=p>)</span> <span class=nf>M</span><span class=p>()</span> <span class=p>{</span>
	<span class=k>if</span> <span class=nx>t</span> <span class=o>==</span> <span class=kc>nil</span> <span class=p>{</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;&lt;nil&gt;&#34;</span><span class=p>)</span>
		<span class=k>return</span>
	<span class=p>}</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=nx>S</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><p>没有被实现的接口称为nil interface，此时可以正常定义对象，但是值和type都是nil，不能调用接口函数</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>I</span> <span class=kd>interface</span> <span class=p>{</span>
	<span class=nf>M</span><span class=p>()</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=kd>var</span> <span class=nx>i</span> <span class=nx>I</span>
	<span class=nf>describe</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>
	<span class=nx>i</span><span class=p>.</span><span class=nf>M</span><span class=p>()</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>describe</span><span class=p>(</span><span class=nx>i</span> <span class=nx>I</span><span class=p>)</span> <span class=p>{</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;(%v, %T)\n&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>i</span><span class=p>)</span>
<span class=p>}</span>

<span class=o>--------------</span>
<span class=p>(&lt;</span><span class=kc>nil</span><span class=p>&gt;,</span> <span class=p>&lt;</span><span class=kc>nil</span><span class=p>&gt;)</span>
<span class=nx>panic</span><span class=p>:</span> <span class=nx>runtime</span> <span class=kt>error</span><span class=p>:</span> <span class=nx>invalid</span> <span class=nx>memory</span> <span class=nx>address</span> <span class=nx>or</span> <span class=kc>nil</span> <span class=nx>pointer</span> <span class=nx>dereference</span>
</code></pre></td></tr></table></div></div></div><p>empty interface可以接受任何参数，类似C++ 的void指针可以接受全指针类型。</p><p>此外，map中有个语法可以测试对应的key是否存在，interface也提供类似的功能，检验接口是否是指定类型，语法为<code>v, ok := i.(type)</code>，使用规则和map类似</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go>	<span class=kd>var</span> <span class=nx>i</span> <span class=kd>interface</span><span class=p>{}</span> <span class=p>=</span> <span class=s>&#34;hello&#34;</span>

	<span class=nx>s</span> <span class=o>:=</span> <span class=nx>i</span><span class=p>.(</span><span class=kt>string</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>s</span><span class=p>)</span>

	<span class=nx>s</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>i</span><span class=p>.(</span><span class=kt>string</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>s</span><span class=p>,</span> <span class=nx>ok</span><span class=p>)</span>

	<span class=nx>f</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>i</span><span class=p>.(</span><span class=kt>float64</span><span class=p>)</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>f</span><span class=p>)</span>
</code></pre></td></tr></table></div></div></div><p>考虑需要检索接口的类型的时候，可以使用循环语句一个一个的实验，但是最好的办法还是有接口可以主动的告诉我们。所以go提供<code>i.(type)</code>和switch连用的方式，让我们可以快速的编写出不同类型接口的代码，如下案例，其中type是固定语法。且只能在switch中使用，无法单独使用。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>func</span> <span class=nf>do</span><span class=p>(</span><span class=nx>i</span> <span class=kd>interface</span><span class=p>{})</span> <span class=p>{</span>
	<span class=k>switch</span> <span class=nx>v</span> <span class=o>:=</span> <span class=nx>i</span><span class=p>.(</span><span class=kd>type</span><span class=p>)</span> <span class=p>{</span>
	<span class=k>case</span> <span class=kt>int</span><span class=p>:</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Twice %v is %v\n&#34;</span><span class=p>,</span> <span class=nx>v</span><span class=p>,</span> <span class=nx>v</span><span class=o>*</span><span class=mi>2</span><span class=p>)</span>
	<span class=k>case</span> <span class=kt>string</span><span class=p>:</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%q is %v bytes long\n&#34;</span><span class=p>,</span> <span class=nx>v</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=nx>v</span><span class=p>))</span>
	<span class=k>default</span><span class=p>:</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;I don&#39;t know about type %T!\n&#34;</span><span class=p>,</span> <span class=nx>v</span><span class=p>)</span>
	<span class=p>}</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nf>do</span><span class=p>(</span><span class=mi>21</span><span class=p>)</span>
	<span class=nf>do</span><span class=p>(</span><span class=s>&#34;hello&#34;</span><span class=p>)</span>
	<span class=nf>do</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h3 id=std预设接口>std预设接口</h3><p>std预定义的接口Stringer，只要自定义类型实现String方法，则可以自定义toString的方法。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>Stringer</span> <span class=kd>interface</span> <span class=p>{</span>
    <span class=nf>String</span><span class=p>()</span> <span class=kt>string</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><p>error 接口，定义Error方法，用于实现自定义错误类型，</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=kt>error</span> <span class=kd>interface</span> <span class=p>{</span>
    <span class=nf>Error</span><span class=p>()</span> <span class=kt>string</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h3 id=exercise-stringers>Exercise: Stringers</h3><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>IPAddr</span> <span class=p>[</span><span class=mi>4</span><span class=p>]</span><span class=kt>byte</span>

<span class=kd>func</span> <span class=p>(</span><span class=nx>i</span> <span class=nx>IPAddr</span><span class=p>)</span> <span class=nf>String</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
	<span class=k>return</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;%v.%v.%v.%v&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=nx>i</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=nx>i</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span> <span class=nx>i</span><span class=p>[</span><span class=mi>3</span><span class=p>])</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>hosts</span> <span class=o>:=</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=nx>IPAddr</span><span class=p>{</span>
		<span class=s>&#34;loopback&#34;</span><span class=p>:</span>  <span class=p>{</span><span class=mi>127</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>},</span>
		<span class=s>&#34;googleDNS&#34;</span><span class=p>:</span> <span class=p>{</span><span class=mi>8</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>8</span><span class=p>},</span>
	<span class=p>}</span>
	<span class=k>for</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>ip</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>hosts</span> <span class=p>{</span>
		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%v: %v\n&#34;</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>ip</span><span class=p>)</span>
	<span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h3 id=exercise-errors>Exercise: Errors</h3><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>ErrNegativeSqrt</span> <span class=kt>float64</span>

<span class=kd>func</span> <span class=p>(</span><span class=nx>e</span> <span class=nx>ErrNegativeSqrt</span><span class=p>)</span> <span class=nf>Error</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
	<span class=k>return</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;cannot Sqrt negative number: %v&#34;</span><span class=p>,</span> <span class=nb>float64</span><span class=p>(</span><span class=nx>e</span><span class=p>))</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>Sqrt</span><span class=p>(</span><span class=nx>x</span> <span class=kt>float64</span><span class=p>)</span> <span class=p>(</span><span class=kt>float64</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
	<span class=k>if</span> <span class=nx>x</span> <span class=p>&lt;</span> <span class=mi>0</span> <span class=p>{</span>
		<span class=k>return</span> <span class=mi>0</span><span class=p>,</span> <span class=nf>ErrNegativeSqrt</span><span class=p>(</span><span class=nx>x</span><span class=p>)</span>
	<span class=p>}</span>
	<span class=k>return</span> <span class=mi>0</span><span class=p>,</span> <span class=kc>nil</span>
<span class=p>}</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>Sqrt</span><span class=p>(</span><span class=mi>2</span><span class=p>))</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>Sqrt</span><span class=p>(</span><span class=o>-</span><span class=mi>2</span><span class=p>))</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><h3 id=goroutine>goroutine</h3><h3 id=channels>Channels</h3><h3 id=select>Select</h3></div></article><div class=updated-badge-container><span title="Updated @ 2022-05-26 11:27:43 +0800" style=cursor:help><svg xmlns="http://www.w3.org/2000/svg" width="130" height="20" class="updated-badge"><linearGradient id="b" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="a"><rect width="130" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#a)"><path class="updated-badge-left" d="M0 0h55v20H0z"/><path class="updated-badge-right" d="M55 0h75v20H55z"/><path fill="url(#b)" d="M0 0h130v20H0z"/></g><g fill="#fff" text-anchor="middle" font-size="110"><text x="285" y="150" fill="#010101" fill-opacity=".3" textLength="450" transform="scale(.1)">updated</text><text x="285" y="140" textLength="450" transform="scale(.1)">updated</text><text x="915" y="150" fill="#010101" fill-opacity=".3" textLength="650" transform="scale(.1)">2022-05-26</text><text x="915" y="140" textLength="650" transform="scale(.1)">2022-05-26</text></g></svg></span></div><div class=post-gitinfo><div class=post-gitinfo-left><div class="gitinfo-item commit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="icon git-icon"><path d="M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 36.4 24.3 67.1 57.5 76.8-.6 16.1-4.2 28.5-11 36.9-15.4 19.2-49.3 22.4-85.2 25.7-28.2 2.6-57.4 5.4-81.3 16.9v-144c32.5-10.2 56-40.5 56-76.3.0-44.2-35.8-80-80-80S0 35.8.0 80c0 35.8 23.5 66.1 56 76.3v199.3C23.5 365.9.0 396.2.0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-34-21.2-63.1-51.2-74.6 3.1-5.2 7.8-9.8 14.9-13.4 16.2-8.2 40.4-10.4 66.1-12.8 42.2-3.9 90-8.4 118.2-43.4 14-17.4 21.1-39.8 21.6-67.9 31.6-10.8 54.4-40.7 54.4-75.9zM80 64c8.8.0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm0 384c-8.8.0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm224-320c8.8.0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16z"/></svg>bc2f6ce</div><div class="gitinfo-item commit-msg"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512" class="icon msg-icon"><path d="M20 424.229h20V279.771H20c-11.046.0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046.0 20 8.954 20 20v212.229h20c11.046.0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046.0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235.0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764.0 96 0z"/></svg>🛺 ☁ others : add commit template</div></div></div><ul class=post-nav><li class=post-nav-next><a href=/posts/readbooks/leveldb/ rel=next>LevelDB源码阅读 ></a></li></ul></div></main><div id=back-to-top class=back-to-top><a href=#><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6.0-33.9L207 39c9.4-9.4 24.6-9.4 33.9.0l194.3 194.3c9.4 9.4 9.4 24.6.0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3.0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a></div><footer id=footer class=footer><div class=footer-inner><div class=site-info>2022–2022&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3.0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;Wakaka</div></div></footer></div><script>'serviceWorker'in navigator&&window.addEventListener('load',function(){navigator.serviceWorker.register('/sw.js')})</script></body></html>